<template name="Accounting_ledger">
    {{#if currentUserHasPermission 'balances.inCommunity'}}
     <div class="row">
        <p class="col-sm-6">
            {{_ 'Select a period for general ledger data'}}<br>
            {{_ 'Clicking on a cell, you can view the relating bill history'}}<br>
            {{#if accountingClosedAt}}
            [{{_ 'schemaAccountingPeriods.accountingClosedAt'}}: {{displayDate accountingClosedAt}}]<br>
            {{/if}}
        </p>
        <div class="col-sm-3 form-group">
            <label class="control-label" for="period">{{_ 'period'}}</label>
            <select id="period" name="period" {{b 'options: periodOptions, value: periodSelected, optionsValue: value, optionsText: label'}} class="form-control"></select>
        </div> 
        <div class="col-sm-3 form-group">
            <div><label><input type="radio" class="periodRadio" name="periodTypeSelector" value="period" checked> {{_ 'Change during period'}}</label></div>
            <div><label><input type="radio" class="periodRadio" name="periodTypeSelector" value="closing"> {{_ 'Balance at the end of period'}}</label></div>
            <div><label><input type="checkbox" id="technicalCheckbox" name="technicalCheckbox" {{b "check: showTechnicalAccounts"}}> {{_ 'Show technical accounts'}}</label></div>
        </div>
    </div>
        {{> Ledger_report accounts=accounts tag=periodSelected tagtype=periodOrCumulation }}
        {{#if showPartnerLedger}}
        {{> Partner_ledger_report contracts=contracts tag=periodSelected tagtype=periodOrCumulation }}
        {{else}}
        <div class="row">
            <div class="col-xs-12 text-center">
                <button class="btn btn-default js-partner-ledger"><i class="fa fa-list"></i> {{_ 'Partner ledger'}}</button>
                {{#if currentUserHasPermission 'transactions.inCommunity'}}
                <button class="btn btn-default js-journals"><i class="fa fa-list"></i> {{_ 'Full journal list'}}</button>
                <!--button class="btn btn-default js-income-statement"><i class="fa fa-list"></i> {{_ 'Income statement'}}</button-->
                {{/if}}
            </div>
        </div>    
        {{/if}}
    {{/if}}

    {{#if currentUserHasPermission 'transactions.inCommunity'}}
    <div class="row">
        <div class="col-xs-12 text-center">
            {{#if selectedPeriodIsOpen}}
            <button class="btn btn-default js-close" title="{{_ 'Closed at'}}: {{accountingClosedAt}}"><i class="fa fa-lock"></i> {{_ 'Close period'}}</button>
            {{/if}}
            {{#if currentUser.super}}
            <button class="btn btn-default js-check-journals"><i class="fa fa-list"></i> {{_ 'Check journals'}}</button>
            {{/if}}
            {{#if community.settings.balancesUploaded}}
            <button class="btn btn-default js-import" title="{{_ 'upload'}}"><i class="fa fa-upload"></i> {{_ 'Upload balances'}}</button>
            {{/if}}
        </div>
    </div>
    {{/if}}
</template>
